{% extends 'admin/admin_base.html' %}
{% load static %}

{% block content %}
<style>
    .readonly-field {
        background-color: #f8f9fa;
        color: #6c757d;
    }
</style>

<div class="card p-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>{{ form.instance.user.username }}</h4>
    </div>

    <!-- Profile Picture -->
    <div class="text-center mb-4">
        {% if form.instance.profile_pic %}
            <img src="{{ form.instance.profile_pic.url }}" alt="Profile Picture"
                 class="rounded-circle" width="120" height="120"
                 style="object-fit: cover; border: 3px solid #dee2e6;">
        {% else %}
            <img src="{% static 'images/default_profile.jpg' %}" alt="No Profile"
                 class="rounded-circle" width="120" height="120"
                 style="object-fit: cover; border: 3px solid #dee2e6;">
        {% endif %}
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row">

            

            <div class=" mb-3">
                <label class="form-label">Student ID</label>
                <input type="text" class="form-control readonly-field"
                       value="{{ form.instance.student_id }}" readonly>
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Phone</label>
                <input type="text" class="form-control readonly-field"
                       value="{{ form.instance.phone|default:'-' }}" readonly>
                <!-- Hidden input to preserve value on POST -->
                <input type="hidden" name="phone" value="{{ form.instance.phone }}">
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Address</label>
                <textarea class="form-control readonly-field" rows="2" readonly>{{ form.instance.address|default:"-" }}</textarea>
                <input type="hidden" name="address" value="{{ form.instance.address }}">
            </div>

            <hr class="my-4">

            <!-- Editable Fields -->
            <div class="col-md-6 mb-3">
                <label class="form-label">Institution</label>
                <input type="text" name="institution" class="form-control"
                       value="{{ form.instance.institution|default:'' }}">
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Pass Out Year</label>
                <input type="text" name="pass_out_year" class="form-control"
                       value="{{ form.instance.pass_out_year|default:'' }}">
            </div>

            <div class="col-md-6 mb-3">
    <label class="form-label">Guardian Name</label>
    <input type="text" name="guardian_name" class="form-control"
           value="{{ form.instance.guardian_name|default:'' }}">
</div>

<div class="col-md-6 mb-3">
    <label class="form-label">Guardian Contact</label>
    <input type="text" name="guardian_contact" class="form-control"
           value="{{ form.instance.guardian_contact|default:'' }}">
</div>


            <div class="col-md-6 mb-3">
                <label class="form-label">LinkedIn</label>
                <input type="text" name="linkedin_url" class="form-control"
                       value="{{ form.instance.linkedin_url|default:'' }}">
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">GitHub</label>
                <input type="text" name="github_url" class="form-control"
                       value="{{ form.instance.github_url|default:'' }}">
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">LeetCode</label>
                <input type="text" name="leetcode_url" class="form-control"
                       value="{{ form.instance.leetcode_url|default:'' }}">
            </div>

        </div>

        <div class="text-end">
            <button type="submit" class="btn btn-success">Save Changes</button>
            <a href="{% url 'admin_panel:students_list' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
