{% extends 'students/students_base.html' %}
{% load static %}

{% block content %}
<div class="card p-4 mb-3 shadow-sm border-0">

    <div class="d-flex align-items-center justify-content-between  ">
        <div class="d-flex align-items-center">
            <img src="{% if profile.profile_pic %}{{ profile.profile_pic.url }}{% else %}{% static 'images/default_profile.jpg' %}{% endif %}" 
                alt="Profile Pic" 
                class="profile-pic me-3" style="width: 100px; height: 100px; border-radius: 100%; border: 1px rgb(194, 189, 189) solid;">
  <div>
    <h4 class="fw-bold">{{ profile.user.get_full_name|default:profile.user.username }}</h4>
    <p class="text-muted mb-1">Student ID: {{ profile.student_id }}</p>
    <p class="mb-1"><i class="bi bi-people-fill me-1"></i> Batch: M22</p> 
    <p class="mb-0"><i class="bi bi-calendar-week me-1"></i> Week 15</p>
</div>


        </div>

        <div class="d-flex flex-column align-items-start gap-2 mt-3">
    <button type="button" class="btn btn-custom d-flex align-items-center" data-bs-toggle="modal" data-bs-target="#editProfileModal">
        <i class="bi bi-pencil me-2"></i>
        Edit Profile
    </button>

    <a href="{% url 'change_password' %}" class="btn btn-custom  d-flex align-items-center">
        <i class="bi bi-lock me-2"></i>
        Change Password
    </a>
</div>

    </div>

</div>

<div class="row g-3">



    <!-- contact------------------------------- -->
    <div class="col-md-6">
    <div class="card shadow-sm p-4 border-0">
        <h5 class="section-title mb-3 fw-bold">
            Contact Info
        </h5>

        <div class="info-pairs">
            <div class="info-row">
                <span class="info-label"><i class="bi bi-envelope me-1"></i> Email</span>
                <span class="info-text">{{ profile.user.email }}</span>
            </div>
            <div class="info-row">
                <span class="info-label"><i class="bi bi-telephone-fill me-1"></i> Phone</span>
                <span class="info-text">{{ profile.phone|default:"N/A" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label"><i class="bi bi-geo-alt-fill me-1"></i> Address</span>
                <span class="info-text">{{ profile.address|default:"N/A" }}</span>
            </div>

            <!-- ----------------------------------------social  -->
            <div class="info-row mt-2">
                <span class="info-label">Social</span>
                <span class="info-text">
                    {% if profile.linkedin_url %}
                        <a href="{{ profile.linkedin_url }}" target="_blank" class="text-decoration-none me-2">
                            <i class="bi bi-linkedin" style="font-size: 2rem;padding-right: 10px;"></i>
                        </a>
                    {% endif %}
                    {% if profile.github_url %}
                        <a href="{{ profile.github_url }}" target="_blank" class="text-decoration-none me-2">
                            <i class="bi bi-github" style="font-size: 2rem;padding-right: 10px;"></i>
                        </a>
                    {% endif %}
                    {% if profile.leetcode_url %}
                        <a href="{{ profile.leetcode_url }}" target="_blank" class="text-decoration-none me-2">
                            <i class="bi bi-code-slash" style="font-size: 2rem; padding-right: 10px;"></i>      
                        </a>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</div>

    <!-- ------------------------------------------Personal -->
    <div class="col-md-6">
        <div class="card shadow-sm p-4 border-0">
            <h5 class="section-title mb-3 fw-bold ">
                 Personal Info
            </h5>

            <div class="info-pairs">
                <div class="info-row">
                    <span class="info-label">Institution</span>
                    <span class="info-text">{{ profile.institution|default:"Not specified" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Pass Out Year</span>
                    <span class="info-text">{{ profile.pass_out_year|default:"Not specified" }}</span>
                </div>
            </div>

            <hr class="my-3">

            <h6 class="fw-bold mb-3 ">
                 Guardian
            </h6>

            <div class="info-pairs">
                <div class="info-row">
                    <span class="info-label">Name</span>
                    <span class="info-text">{{ profile.guardian_name|default:"Not added" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Contact</span>
                    <span class="info-text">{{ profile.guardian_contact|default:"Not added" }}</span>
                </div>
            </div>
        </div>
    </div>

</div>


{% include 'students/edit_profile.html' with form=form %}


<style>
.btn-custom {
    background-color: white;
    border: none;
    transition: all 0.3s ease;
}

.btn-custom:hover {
    background-color: #d0ebff;
    color: #042350;
}

.section-title {
    font-size: 1.2rem;
}

.info-pairs {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.info-row {
    display: flex;
    justify-content: flex-start; 
    gap: 2rem; 
}

.info-label {
    font-weight: 600;
    color: #272727;
    min-width: 140px; 
}

.info-text {
    color: #333;
    font-weight: 500;
}
</style>

{% endblock %}
